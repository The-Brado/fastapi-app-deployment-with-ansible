---
# tasks file for log

- name: Log all successful activities
  ansible.builtin.copy:
    content: |
      "{{ create_user_output.stdout | default('No output captured for create_user_output') }}"
      "{{ user_permissions_output.stdout | default('No output captured for user_permissions_output') }}"
      "{{ priviledge_action_output.stdout | default('No output captured for priviledge_action_output') }}"
      "{{ package_installed_output.stdout | default('No output captured for package_installed_output') }}"
      "{{ clone_directory_output.stdout | default('No output captured for clone_directory_output') }}"
      "{{ gitrepo_status_output.stdout | default('No output captured for gitrepo_status_output') }}"
      "{{ clone_repo_output.stdout | default('No output captured for clone_repo_output') }}"
      "{{ repo_owner_output.stdout | default('No output captured for repo_owner_output') }}"
      "{{ install_postgres_output.stdout | default('No output captured for install_postgres_output') }}"
      "{{ secrets_dir_output.stdout | default('No output captured for secrets_dir_output') }}"
      "{{ postgres_cred_output.stdout | default('No output captured for postgres_cred_output') }}"
      "{{ postgres_db_output.stdout | default('No output captired for postgres_db_output') }}"
      "{{ postgres_user_output.stdout | default('No output captured for postgres_user_output') }}"
      "{{ venv_created.stdout | default('No output captured for venv_created') }}"
      "{{ api_started.stdout | default('No output captured for api_started') }}"
      "{{ install_nginx_output.stdout | default('No output captured for install_nginx_output') }}"
    dest: "{{ log_output_file }}"
   
- name: Log all errors 
  ansible.builtin.copy:
    content: |
      "{{ create_user_output.stderr | default('No error captured for create_user_output') }}"
      "{{ user_permissions_output.stderr | default('No error captured for user_permissions_output') }}"
      "{{ priviledge_action_output.stderr | default('No error captured for priviledge_action_output') }}"
      "{{ package_installed_output.stderr | default('No error captured for package_installed_output') }}"
      "{{ clone_directory_output.stderr | default('No error captured  for clone_directory_output') }}"
      "{{ gitrepo_status_output.stderr | default('No error captured for gitrepo_status_output') }}"
      "{{ repo_owner_output.stderr | default('No error captured for repo_owner_output') }}"
      "{{ install_postgres_output.stderr | default('No error captured for install_postgres_output') }}"
      "{{ secrets_dir_output.stderr | default('No error for captured secrets_dir_output') }}"
      "{{ postgres_cred_output.stderr | default('No error captured  for postgres_cred_output') }}"
      "{{ postgres_db_output.stderr | default('No error captured for postgres_db_output') }}"
      "{{ postgres_user_output.stderr | default('No error captured for postgres_user_output') }}"
      "{{ venv_created.stderr | default('No error captured for venv_created') }}"
      "{{ api_started.stderr | default('No error captured for api_started') }}"
      "{{ install_nginx_output.stderr | default('No error captured for install_nginx_output') }}"
    dest: "{{ log_error_file }}"